<?xml version="1.0" encoding="UTF-8"?>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
      xmlns:p="http://primefaces.org/ui">
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.min.js" integrity="sha384-smHYKdLADwkXOn1EmN1qk/HfnUcbVRZyYmZ4qpPea6sjB/pTJ0euyQp0Mk8ck+5T" crossorigin="anonymous"></script>

      
    <h:head>
        <title><ui:insert name="title">ACOES - <h:outputText value="#{sessionControl.getUser()}"></h:outputText></ui:insert></title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
        <h:outputStylesheet library="css" name="bootstrap.css"  />
        <h:outputStylesheet library="css" name="bootstrap-formhelpers-countries.flags.css"  />
    </h:head>
    <script src="assets/js/bootstrap-formhelpers-countries.en_US.js"></script>
    <script src="assets/js/bootstrap-formhelpers-countries.js"></script>
    <body>
        <!--<header id="main-header">
            <img src="resources/images/acoes_logo.png" alt="ACOES"></img>
        </header>-->
        <nav class="navbar navbar-expand-lg navbar-dark bg-primary">
          <a class="navbar-brand" href="index.xhtml">ACOES</a>
          <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarColor01" aria-controls="navbarColor01" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
          </button>

          <div class="collapse navbar-collapse" id="navbarColor01">
            <ul class="navbar-nav mr-auto">
                <li class="nav-item">
                    <a class="nav-link" href="projects.xhtml">Projects</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="collaborate.xhtml">Collaborate</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="donate.xhtml">Donate</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="contact_us.xhtml">Contact us</a>
                </li>
            </ul>
                <div class="btn-group" role="group" aria-label="Button group with nested dropdown">
                    
                    <c:choose>
                        <c:when test="#{sessionControl.loggedIn()}">
                            <button type="button" class="btn btn-primary">Welcome <h:outputText value="#{sessionControl.user.email.substring(0,sessionControl.user.email.indexOf('@'))}"></h:outputText></button>
                            <div class="btn-group toggle" role="group">
                              <button id="btnGroupDrop1" type="button" class="btn btn-primary dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true"></button>
                              <div class="dropdown-menu toggle" aria-labelledby="btnGroupDrop1" x-placement="bottom-start" style="position: absolute; transform: translate3d(0px, 38px, 0px); top: 0px; left: -180px; will-change: transform;">
                                <a class="dropdown-item" href="my_information.xhtml">My information</a>
                                <c:choose>
                                    <c:when test="#{sessionControl.usersServices.isAdmin(sessionControl.user)}">
                                        <a class="dropdown-item" href="dashboard_info.xhtml">Dashboard</a>
                                        <a class="dropdown-item" href="sponsor_grid_search.xhtml">Sponsor search</a>
                                        <a class="dropdown-item" href="admin_notifications.xhtml">Notifications (6)</a>
                                    </c:when>
                                    <c:otherwise>
                                        <a class="dropdown-item" href="my_sponsorship.xhtml">Sponsorships</a>
                                         <a class="dropdown-item" href="apply_for_sponsorship.xhtml">Apply for Sponsorship</a>
                                        <a class="dropdown-item" href="payments.xhtml">Payments</a>
                                    </c:otherwise>
                                </c:choose>
                                <h:form>
                                    <h:commandLink class="dropdown-item" value="Log out" action="#{sessionControl.logout()}"></h:commandLink>
                                </h:form>
                              </div>
                            </div>                        
                        </c:when>
                        <c:otherwise>
                           <button type="button" class="btn btn-primary">Sign in</button>
                           <div class="btn-group toggle" role="group">
                             <button id="btnGroupDrop1" type="button" class="btn btn-primary dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true"></button>
                             <div class="dropdown-menu toggle" aria-labelledby="btnGroupDrop1" x-placement="bottom-start" style="position: absolute; transform: translate3d(0px, 38px, 0px); top: 0px; left: -120px; will-change: transform;">
                               <a class="dropdown-item" href="login.xhtml">Login</a>
                               <a class="dropdown-item" href="registration.xhtml">Sign up</a>
                             </div>
                           </div>                            
                        </c:otherwise>
                    </c:choose>                  
                </div>
          </div>
        </nav>
        <section style="padding: 10px" class="content"><ui:insert name="content"></ui:insert></section>
    </body>
</html>
